import{s as st,e as b,t as B,a as F,c as h,b as A,d as N,f as E,g as O,m as et,o as c,i as ot,h as a,E as nt,j as Y,n as at,k as rt}from"../chunks/scheduler.BJHXs0pQ.js";import{S as lt,i as it}from"../chunks/index.DitbgsN3.js";import{u as ct}from"../chunks/firebase.DQ-78Fzk.js";import{p as ut}from"../chunks/stores.DhZdjoF5.js";import{p as mt,i as pt,a as dt}from"../chunks/entry.CFqZlSWe.js";function ft(e){const t=JSON.parse(e);return t.data&&(t.data=mt(t.data)),t}function G(e){return HTMLElement.prototype.cloneNode.call(e)}function bt(e,t=()=>{}){const l=async({action:r,result:u,reset:s=!0,invalidateAll:v=!0})=>{u.type==="success"&&(s&&HTMLFormElement.prototype.reset.call(e),v&&await pt()),(location.origin+location.pathname===r.origin+r.pathname||u.type==="redirect"||u.type==="error")&&dt(u)};async function _(r){var M,H,y,w,S;if(((M=r.submitter)!=null&&M.hasAttribute("formmethod")?r.submitter.formMethod:G(e).method)!=="post")return;r.preventDefault();const s=new URL((H=r.submitter)!=null&&H.hasAttribute("formaction")?r.submitter.formAction:G(e).action),v=(y=r.submitter)!=null&&y.hasAttribute("formenctype")?r.submitter.formEnctype:G(e).enctype,m=new FormData(e),x=(w=r.submitter)==null?void 0:w.getAttribute("name");x&&m.append(x,((S=r.submitter)==null?void 0:S.getAttribute("value"))??"");const L=new AbortController;let D=!1;const R=await t({action:s,cancel:()=>D=!0,controller:L,formData:m,formElement:e,submitter:r.submitter})??l;if(D)return;let p;try{const o=new Headers({accept:"application/json","x-sveltekit-action":"true"});v!=="multipart/form-data"&&o.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(v)?v:"application/x-www-form-urlencoded");const d=v==="multipart/form-data"?m:new URLSearchParams(m),f=await fetch(s,{method:"POST",headers:o,cache:"no-store",body:d,signal:L.signal});p=ft(await f.text()),p.type==="error"&&(p.status=f.status)}catch(o){if((o==null?void 0:o.name)==="AbortError")return;p={type:"error",error:o}}R({action:s,formData:m,formElement:e,update:o=>l({action:s,result:p,reset:o==null?void 0:o.reset,invalidateAll:o==null?void 0:o.invalidateAll}),result:p})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",_),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",_)}}}function ht(e){var Z;let t,l,_,r,u,s,v,m,x=e[0].bio+"",L,D,C,R,p=e[2].status+"",M,H,y,w=(((Z=e[2].form)==null?void 0:Z.problem)??"")+"",S,o,d,f,g,K='<span class="label-text">Your bio</span>',z,T,j,J,P,Q="Update Bio",V,W;return{c(){t=b("main"),l=b("a"),_=B("Edit page"),u=F(),s=b("p"),v=B("Current Bio: "),m=b("span"),L=B(x),D=F(),C=b("p"),R=B("Status Code: "),M=B(p),H=F(),y=b("p"),S=B(w),o=F(),d=b("form"),f=b("div"),g=b("label"),g.innerHTML=K,z=F(),T=b("textarea"),J=F(),P=b("button"),P.textContent=Q,this.h()},l(i){t=h(i,"MAIN",{class:!0});var n=A(t);l=h(n,"A",{href:!0,class:!0});var U=A(l);_=N(U,"Edit page"),U.forEach(E),u=O(n),s=h(n,"P",{});var k=A(s);v=N(k,"Current Bio: "),m=h(k,"SPAN",{class:!0});var $=A(m);L=N($,x),$.forEach(E),k.forEach(E),D=O(n),C=h(n,"P",{});var X=A(C);R=N(X,"Status Code: "),M=N(X,p),X.forEach(E),H=O(n),y=h(n,"P",{class:!0});var tt=A(y);S=N(tt,w),tt.forEach(E),o=O(n),d=h(n,"FORM",{method:!0});var q=A(d);f=h(q,"DIV",{class:!0});var I=A(f);g=h(I,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),et(g)!=="svelte-p13vsy"&&(g.innerHTML=K),z=O(I),T=h(I,"TEXTAREA",{name:!0,class:!0}),A(T).forEach(E),I.forEach(E),J=O(q),P=h(q,"BUTTON",{class:!0,"data-svelte-h":!0}),et(P)!=="svelte-tqnit3"&&(P.textContent=Q),q.forEach(E),n.forEach(E),this.h()},h(){var i;c(l,"href",r="/"+((i=e[1])==null?void 0:i.username)+"/edit"),c(l,"class","btn btn-primary fixed left-5"),c(m,"class","text-info"),c(y,"class","text-error"),c(g,"for","bio"),c(g,"class","label"),c(T,"name","bio"),c(T,"class","textarea textarea-bordered textarea-accent"),T.value=j=e[0].bio,c(f,"class","form-control"),c(P,"class","btn btn-primary my-5"),c(d,"method","POST"),c(t,"class","max-w-lg prose text-center mx-auto my-6")},m(i,n){ot(i,t,n),a(t,l),a(l,_),a(t,u),a(t,s),a(s,v),a(s,m),a(m,L),a(t,D),a(t,C),a(C,R),a(C,M),a(t,H),a(t,y),a(y,S),a(t,o),a(t,d),a(d,f),a(f,g),a(f,z),a(f,T),a(d,J),a(d,P),V||(W=nt(bt.call(null,d)),V=!0)},p(i,[n]){var U,k;n&2&&r!==(r="/"+((U=i[1])==null?void 0:U.username)+"/edit")&&c(l,"href",r),n&1&&x!==(x=i[0].bio+"")&&Y(L,x),n&4&&p!==(p=i[2].status+"")&&Y(M,p),n&4&&w!==(w=(((k=i[2].form)==null?void 0:k.problem)??"")+"")&&Y(S,w),n&1&&j!==(j=i[0].bio)&&(T.value=j)},i:at,o:at,d(i){i&&E(t),V=!1,W()}}}function vt(e,t,l){let _,r;rt(e,ct,s=>l(1,_=s)),rt(e,ut,s=>l(2,r=s));let{data:u}=t;return e.$$set=s=>{"data"in s&&l(0,u=s.data)},[u,_,r]}class wt extends lt{constructor(t){super(),it(this,t,vt,ht,st,{data:0})}}export{wt as component};
