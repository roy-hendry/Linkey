import{k as ee,q as te,l as se,m as ae,n as le,i as ne}from"../chunks/firebase.DQ-78Fzk.js";import{H as oe}from"../chunks/control.CYgJF_JY.js";import{s as re,e as v,a as $,t as P,l as ie,c as k,f as d,g as E,b as q,d as A,m as ce,o as m,r as K,h as f,i as B,q as ue,j as Q,I as me,J as fe}from"../chunks/scheduler.BJHXs0pQ.js";import{S as he,i as _e,t as C,e as pe,b as z,c as de,a as ge,m as be,d as ve,g as ke}from"../chunks/index.DitbgsN3.js";import{e as V,U as we,g as xe,a as ye}from"../chunks/UserLink.CSeQuCB8.js";function W(i,l){throw new oe(i,l)}new TextEncoder;const Le=async({params:i})=>{var u,o;const l=ee(ne,"users"),n=te(l,ae("username","==",i.username),se(1)),c=await le(n),h=(u=c.docs[0])==null?void 0:u.exists(),s=(o=c.docs[0])==null?void 0:o.data();if(!h)throw W(404,"User not found");if(!s.published)throw W(403,`The profile of @${s.username} is private`);return{username:s.username,photoURL:s.photoURL,bio:s.bio,links:s.links??[]}},Ce=Object.freeze(Object.defineProperty({__proto__:null,load:Le},Symbol.toStringTag,{value:"Module"}));function X(i,l,n){const c=i.slice();return c[2]=l[n],c}function Y(i){let l,n,c,h;const s=[i[2]];let u={};for(let o=0;o<s.length;o+=1)u=fe(u,s[o]);return n=new we({props:u}),{c(){l=v("li"),de(n.$$.fragment),c=$(),this.h()},l(o){l=k(o,"LI",{class:!0});var _=q(l);ge(n.$$.fragment,_),c=E(_),_.forEach(d),this.h()},h(){m(l,"class","w-56 my-2")},m(o,_){B(o,l,_),be(n,l,null),f(l,c),h=!0},p(o,_){const y=_&1?xe(s,[ye(o[2])]):{};n.$set(y)},i(o){h||(C(n.$$.fragment,o),h=!0)},o(o){z(n.$$.fragment,o),h=!1},d(o){o&&d(l),ve(n)}}}function Ue(i){let l,n,c,h,s,u,o,_=i[0].username+"",y,I,p,R,M,L,T=(i[0].bio??"No bio yet...")+"",j,N,w,S,b,D="Copy link ðŸ“œ",g,H,G;document.title=l="@"+i[0].username+" Links";let x=V(i[0].links),a=[];for(let t=0;t<x.length;t+=1)a[t]=Y(X(i,x,t));const Z=t=>z(a[t],1,1,()=>{a[t]=null});return{c(){n=v("meta"),h=$(),s=v("main"),u=v("h1"),o=P("@"),y=P(_),I=$(),p=v("img"),M=$(),L=v("p"),j=P(T),N=$(),w=v("ul");for(let t=0;t<a.length;t+=1)a[t].c();S=$(),b=v("button"),b.textContent=D,this.h()},l(t){const r=ie("svelte-1ui6vuc",document.head);n=k(r,"META",{name:!0,content:!0}),r.forEach(d),h=E(t),s=k(t,"MAIN",{class:!0});var e=q(s);u=k(e,"H1",{class:!0});var U=q(u);o=A(U,"@"),y=A(U,_),U.forEach(d),I=E(e),p=k(e,"IMG",{src:!0,alt:!0,width:!0,class:!0}),M=E(e),L=k(e,"P",{class:!0});var J=q(L);j=A(J,T),J.forEach(d),N=E(e),w=k(e,"UL",{class:!0});var F=q(w);for(let O=0;O<a.length;O+=1)a[O].l(F);F.forEach(d),S=E(e),b=k(e,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(b)!=="svelte-1m0d3cs"&&(b.textContent=D),e.forEach(d),this.h()},h(){m(n,"name","description"),m(n,"content",c=i[0].bio),m(u,"class","text-7xl my-8 text-purple-500"),K(p.src,R=i[0].photoURL??"user.png")||m(p,"src",R),m(p,"alt","photoURL"),m(p,"width","256"),m(p,"class","mx-auto"),m(L,"class","text-xl my-8"),m(w,"class","flex flex-col items-center justify-center h-full"),m(b,"class","btn bg-purple-500 text-white px-4 py-2 rounded-lg my-8"),m(s,"class","prose text-center mx-auto mt-8")},m(t,r){f(document.head,n),B(t,h,r),B(t,s,r),f(s,u),f(u,o),f(u,y),f(s,I),f(s,p),f(s,M),f(s,L),f(L,j),f(s,N),f(s,w);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(w,null);f(s,S),f(s,b),g=!0,H||(G=ue(b,"click",i[1]),H=!0)},p(t,[r]){if((!g||r&1)&&l!==(l="@"+t[0].username+" Links")&&(document.title=l),(!g||r&1&&c!==(c=t[0].bio))&&m(n,"content",c),(!g||r&1)&&_!==(_=t[0].username+"")&&Q(y,_),(!g||r&1&&!K(p.src,R=t[0].photoURL??"user.png"))&&m(p,"src",R),(!g||r&1)&&T!==(T=(t[0].bio??"No bio yet...")+"")&&Q(j,T),r&1){x=V(t[0].links);let e;for(e=0;e<x.length;e+=1){const U=X(t,x,e);a[e]?(a[e].p(U,r),C(a[e],1)):(a[e]=Y(U),a[e].c(),C(a[e],1),a[e].m(w,null))}for(ke(),e=x.length;e<a.length;e+=1)Z(e);pe()}},i(t){if(!g){for(let r=0;r<x.length;r+=1)C(a[r]);g=!0}},o(t){a=a.filter(Boolean);for(let r=0;r<a.length;r+=1)z(a[r]);g=!1},d(t){t&&(d(h),d(s)),d(n),me(a,t),H=!1,G()}}}function $e(i,l,n){let{data:c}=l;const h=()=>{navigator.clipboard.writeText(window.location.href)};return i.$$set=s=>{"data"in s&&n(0,c=s.data)},[c,h]}class Ie extends he{constructor(l){super(),_e(this,l,$e,Ue,re,{data:0})}}export{Ie as component,Ce as universal};
